"use strict";var Data={colleagues:[{id:0,name:"Me",picture:"alex"},{id:1,name:"Eduardo A",picture:"man1"},{id:2,name:"Maria B",picture:"maria"},{id:3,name:"Mark G",picture:"mark"},{id:4,name:"Ricardo G",picture:"ricardo"},{id:5,name:"Alex R",picture:"alex"}],commitments:[{id:1,committer:0,committee:1,what:"Compile Annual Report",why:"Because",success:"Looks good",when:"by Friday"},{id:2,committer:0,committee:1,what:"Keep lookin good",why:"Because you deserve it",success:"Looks good",when:"by Friday"},{id:3,committer:0,committee:2,what:"Read that book",why:"Because its good",success:"Looks good",when:"by Friday"},{id:4,committer:0,committee:2,what:"Watch Narcos",why:"Because its good",success:"Looks good",when:"by Friday"},{id:5,committer:0,committee:3,what:"Watch Narcos",why:"Because its good",success:"Looks good",when:"by Friday"},{id:6,committer:0,committee:3,what:"Watch Breaking Bad",why:"Because its good",success:"Looks good",when:"by Friday"},{id:7,committer:0,committee:4,what:"Watch Narcos",why:"Because its good",success:"Looks good",when:"by Friday"},{id:8,committer:0,committee:4,what:"Watch Better Call Saul",why:"Because its good",success:"Looks good",when:"by Friday"},{id:9,committer:0,committee:5,what:"Compile Annual Report",why:"Because",success:"Looks good",when:"by Friday"},{id:10,committer:0,committee:5,what:"Keep lookin good",why:"Because you deserve it",success:"Looks good",when:"by Friday"},{id:11,committer:1,committee:0,what:"Gonna See ya",why:"Because",success:"Looks good",when:"by Friday"},{id:12,committer:2,committee:0,what:"Keep lookin good",why:"Because you deserve it",success:"Looks good",when:"by Friday"},{id:13,committer:3,committee:0,what:"Read that book",why:"Because its good",success:"Looks good",when:"by Friday"},{id:14,committer:4,committee:0,what:"Watch Narcos",why:"Because its good",success:"Looks good",when:"by Friday"},{id:15,committer:5,committee:0,what:"Watch Narcos",why:"Because its good",success:"Looks good",when:"by Friday"},{id:16,committer:1,committee:0,what:"Watch Breaking Bad",why:"Because its good",success:"Looks good",when:"by Friday"},{id:17,committer:2,committee:0,what:"Watch Narcos",why:"Because its good",success:"Looks good",when:"by Friday"},{id:18,committer:3,committee:0,what:"Watch Better Call Saul",why:"Because its good",success:"Looks good",when:"by Friday"},{id:19,committer:4,committee:0,what:"Compile Annual Report",why:"Because",success:"Looks good",when:"by Friday"},{id:20,committer:5,committee:0,what:"Keep lookin good",why:"Because you deserve it",success:"Looks good",when:"by Friday"}]},$id=function(e){return document.getElementById(e)},$class=function(e){return document.querySelector("."+e)},$classes=function(e){return document.querySelectorAll("."+e)},UI={currentView:"browse-colleagues",currentColleague:null,filteredBy:0,templates:{colleagueCard:$id("colleague_card"),comet:$id("comet"),cometDetail:$id("cometDetail"),chooseColleague:$id("chooseColleague")},nav:{browseColleagues:function(){return $class("back-arrow").classList.remove("show"),UI.transition(event,"browse-colleagues",UI.renderColleagueCards,!1)},colleagueDetail:function(){return $class("back-arrow").classList.add("show"),$class("back-arrow").onclick=UI.nav.browseColleagues,$class("colleague-detail").classList.add("show"),UI.transition(event,"colleague-detail",UI.renderColleagueDetail,!1)},closeColleageDetail:function(){return $class("back-arrow").classList.remove("show"),UI.transition(event,"browse-colleagues",!1)},cometDetail:function(){return UI.transition(event,"comet-detail",UI.renderCometDetail,!0)},closeDetail:function(){return $class("back-arrow").classList.add("show"),$class("transition-sheet").remove(),$class("back-arrow").onclick=UI.nav.browseColleagues,UI.transition(event,"colleague-detail",!1)},showNewComet:function(){$class("back-arrow").classList.remove("show"),$class("new-comet").classList.add("show")},hideNewComet:function(){"colleague-detail"===UI.currentView&&$class("back-arrow").classList.add("show"),$class("new-comet").classList.remove("show")}},bindToMany:function(e,t,o){for(var a=$classes(e),c=0;c<a.length;c++)a[c][t]=o},filterCommitter:function(){for(var e=document.querySelectorAll("input[name=comettoggle]"),t=0;t<e.length;t++)e[t].checked&&("fromme"===e[t].value?UI.filteredBy=0:UI.filteredBy=UI.currentColleague[0].id);UI.renderColleagueDetail()},genSheet:function(e){var t=e.target.getBoundingClientRect(),o=document.createElement("div"),a=$class("mobile-container");return o.classList.add("transition-sheet"),o.style.top=t.top-a.offsetTop+"px",o.style.left=t.left-a.offsetLeft+"px",o.style.width=t.width+"px",o.style.height=t.height+"px",o},transition:function(e,t,o,a){if(a){var c=UI.genSheet(e),s=UI.currentColleague[0].picture;c.style.background="url(../assets/images/"+s+".png)",c.style.backgroundSize="100%",$class("mobile-container").appendChild(c),$class(t).style.display="block",setTimeout(function(){$class(UI.currentView).style.display="none",UI.currentView=t},500),o&&o(e)}else o&&o(e),$class(UI.currentView).style.display="none",UI.currentView=t,$class(t).style.display="block"},renderColleagueCards:function(){$class("colleague-container").innerHTML="";for(var e=1;e<Data.colleagues.length;e++){var t=UI.templates.colleagueCard.content.cloneNode(!0),o=t.querySelector(".colleague");o.style.background='url("../assets/images/'+Data.colleagues[e].picture+'.png")',o.style.backgroundSize="cover",o.setAttribute("data-colleague-id",Data.colleagues[e].id),o.onclick=UI.nav.colleagueDetail,t.querySelector(".colleague-name").innerHTML=Data.colleagues[e].name,$class("colleague-container").appendChild(t)}},renderColleagueChoices:function(){for(var e=0;e<Data.colleagues.length;e++){var t=UI.templates.chooseColleague.content.cloneNode(!0),o=t.querySelector(".colleague-choice");o.querySelector("img").setAttribute("src","assets/images/"+Data.colleagues[e].picture+".png"),o.querySelector("input").setAttribute("id","colleagueChoice"+Data.colleagues[e].id),o.querySelector("label").setAttribute("for","colleagueChoice"+Data.colleagues[e].id),t.querySelector(".colleague-choice-name").innerHTML+=Data.colleagues[e].name,$class("choose-colleague").appendChild(t)}},renderColleagueDetail:function(e){$class("comet-slider").innerHTML="";var t,o;e?(t=e.target.getAttribute("data-colleague-id"),o=map(Data.colleagues,"id",t),UI.filteredBy=o[0].id,UI.currentColleague=o):o=UI.currentColleague;var a=map(Data.commitments,"committee",UI.filteredBy);a=map(Data.commitments,"committer",UI.currentColleague[0].id);for(var c=0;c<a.length;c++){var s=UI.templates.comet.content.cloneNode(!0),i=s.querySelector(".comet");i.setAttribute("data-comet-id",a[c].id),i.style.background='url("../assets/images/'+o[0].picture+'.png")',i.style.backgroundSize="cover",0===UI.filteredBy?i.querySelector(".comet-flag").innerHTML="You commited to "+o[0].name+":":i.querySelector(".comet-flag").innerHTML=o[0].name+" commited to you:",i.querySelector(".comet-title").innerHTML=a[c].what,i.querySelector(".comet-duedate").innerHTML+=a[c].when,i.onclick=UI.nav.cometDetail,$class("comet-slider").appendChild(i)}},renderCometDetail:function(e){var t=e.target.getAttribute("data-comet-id"),o=map(Data.commitments,"id",t)[0],a=map(Data.colleagues,"id",o.committee),c=UI.templates.cometDetail.content.cloneNode(!0);$class("comet-detail").innerHTML="",c.querySelector(".comet-photo").style.backgroundSize="cover",c.querySelector(".comet-flag").innerHTML=a[0].name+" commited to you:",c.querySelector(".comet-detail-title").innerHTML=o.what,c.querySelector(".reason").innerHTML=o.why,c.querySelector(".success").innerHTML=o.success,c.querySelector(".deadline").innerHTML=o.when,$class("comet-detail").appendChild(c)}},createTextEl=function(e,t){var o=document.createElement(e);return o.appendChild(document.createTextNode(t)),o},map=function(e,t,o){for(var a=[],c=0;c<e.length;c++)e[c][t]===parseInt(o)&&a.push(e[c]);return a},preloadImages=function(e){preloadImages.list||(preloadImages.list=[]);for(var t=preloadImages.list,o=0;o<e.length;o++){var a=new Image;a.onload=function(){var e=t.indexOf(this);e!==-1&&t.splice(e,1)},t.push(a),a.src="assets/images/"+e[o]+".png"}};document.addEventListener("DOMContentLoaded",function(){UI.renderColleagueCards(),UI.renderColleagueChoices(),preloadImages(["alex","man1","maria","mark","ricardo"])});